# MCP Python Debug å¤š AI é…ç½®æ–‡ä»¶
# åŠ å¯†è²¨å¹£é‡åŒ–äº¤æ˜“ç³»çµ±å°ˆç”¨

ai_backends:
  claude:
    endpoint: "https://api.anthropic.com/v1/messages"
    model: "claude-3-5-sonnet-20241022"
    speciality: "deep_logic_analysis"
    weight: 0.4
    max_tokens: 1500
    temperature: 0.1
    
  gpt4:
    endpoint: "https://api.openai.com/v1/chat/completions"
    model: "gpt-4-turbo-preview"
    speciality: "syntax_repair"
    weight: 0.35
    max_tokens: 1500
    temperature: 0.1
    
  gemini:
    endpoint: "https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent"
    model: "gemini-pro"
    speciality: "quick_response"
    weight: 0.25
    max_tokens: 1000
    temperature: 0.2

# èšåˆç­–ç•¥é…ç½®
aggregation_strategy:
  consensus_threshold: 0.6
  min_valid_responses: 2
  
  # æ ¹æ“šéŒ¯èª¤é¡å‹èª¿æ•´ AI æ¬Šé‡ [Claude, GPT-4, Gemini]
  error_type_weighting:
    "ImportError": [0.3, 0.4, 0.3]      # GPT-4 åœ¨ä¾è³´å•é¡Œä¸Šè¼ƒå¼·
    "AttributeError": [0.5, 0.3, 0.2]   # Claude åœ¨é‚è¼¯åˆ†æä¸Šè¼ƒå¼·
    "ValueError": [0.4, 0.4, 0.2]       # Claude å’Œ GPT-4 å‡è¡¡
    "KeyError": [0.3, 0.5, 0.2]         # GPT-4 åœ¨æ•¸æ“šè™•ç†ä¸Šè¼ƒå¼·
    "TypeError": [0.4, 0.35, 0.25]      # å‡è¡¡åˆ†é…
    "SyntaxError": [0.2, 0.6, 0.2]      # GPT-4 åœ¨èªæ³•ä¿®å¾©ä¸Šæœ€å¼·
    "ModuleNotFoundError": [0.25, 0.5, 0.25]
    "FileNotFoundError": [0.3, 0.4, 0.3]
    "ConnectionError": [0.3, 0.3, 0.4]  # Gemini åœ¨ç¶²çµ¡å•é¡Œä¸Šè¼ƒå¿«

# é‡åŒ–äº¤æ˜“ç³»çµ±ç‰¹å®šé…ç½®
quant_trading_rules:
  # å¸¸è¦‹éŒ¯èª¤è‡ªå‹•è™•ç†
  common_errors:
    "TA-Lib import error":
      priority: "CRITICAL"
      keywords: ["talib", "TA_Lib", "No module named 'talib'"]
      auto_fix_suggestion: |
        TA-Lib å®‰è£å•é¡Œï¼š
        Windows: pip install TA_Lib-0.4.25-cp310-cp310-win_amd64.whl
        macOS: brew install ta-lib && pip install TA-Lib
        Linux: éœ€è¦å…ˆå®‰è£ç³»çµ±ä¾è³´ï¼Œè«‹åƒè€ƒå®‰è£æŒ‡å—
      
    "CCXT connection error":
      priority: "HIGH"
      keywords: ["ccxt", "binance", "connection", "api"]
      auto_fix_suggestion: |
        äº¤æ˜“æ‰€é€£æ¥å•é¡Œï¼š
        1. æª¢æŸ¥ .env æ–‡ä»¶ä¸­çš„ API keys é…ç½®
        2. ç¢ºèªç¶²çµ¡é€£æ¥æ­£å¸¸
        3. æª¢æŸ¥ API keys æ¬Šé™è¨­ç½®
        4. ç¢ºèªæ˜¯å¦ä½¿ç”¨æ­£ç¢ºçš„æ¸¬è©¦ç¶²/å¯¦ç¶²ç’°å¢ƒ
      
    "Pandas DataFrame KeyError":
      priority: "HIGH"
      keywords: ["KeyError", "dataframe", "column", "pandas"]
      auto_fix_suggestion: |
        æ•¸æ“šåˆ—ç¼ºå¤±å•é¡Œï¼š
        1. æª¢æŸ¥æ•¸æ“šæºæ˜¯å¦åŒ…å«æ‰€éœ€åˆ—
        2. é©—è­‰æ•¸æ“šä¸‹è¼‰å®Œæ•´æ€§
        3. æª¢æŸ¥åˆ—åæ‹¼å¯«æ˜¯å¦æ­£ç¢º
        4. ç¢ºèªæ•¸æ“šæ™‚é–“ç¯„åœæ˜¯å¦æ­£ç¢º
      
    "LightGBM training error":
      priority: "MEDIUM"
      keywords: ["lightgbm", "lgb", "training", "fit"]
      auto_fix_suggestion: |
        æ¨¡å‹è¨“ç·´å•é¡Œï¼š
        1. æª¢æŸ¥ç‰¹å¾µæ•¸æ“šé¡å‹ (æ•¸å€¼å‹)
        2. é©—è­‰æ¨™ç±¤æ•¸æ“šæ ¼å¼
        3. æª¢æŸ¥æ˜¯å¦æœ‰ NaN æˆ–ç„¡é™å€¼
        4. ç¢ºèªè¨“ç·´æ•¸æ“šä¸ç‚ºç©º
      
    "Optuna optimization error":
      priority: "MEDIUM"
      keywords: ["optuna", "optimize", "trial"]
      auto_fix_suggestion: |
        è¶…åƒæ•¸å„ªåŒ–å•é¡Œï¼š
        1. æª¢æŸ¥ç›®æ¨™å‡½æ•¸è¿”å›å€¼
        2. é©—è­‰åƒæ•¸ç©ºé–“å®šç¾©
        3. ç¢ºèªæ•¸æ“šé›†ä¸ç‚ºç©º
        4. æª¢æŸ¥è³‡æºé™åˆ¶ (å…§å­˜/æ™‚é–“)

  # æ¨¡å¡Šç‰¹å®šæç¤ºè©
  module_specific_prompts:
    data_processing: |
      **é‡åŒ–äº¤æ˜“æ•¸æ“šè™•ç†æ¨¡å¡Šåˆ†æ**
      
      è«‹ç‰¹åˆ¥æ³¨æ„ä»¥ä¸‹é‡åŒ–äº¤æ˜“ç³»çµ±ç‰¹é»ï¼š
      - æ•¸æ“šä¾†æºï¼šBinance API é™åˆ¶å’ŒéŒ¯èª¤è™•ç†
      - æ™‚é–“åºåˆ—ï¼šç¢ºä¿æ•¸æ“šé€£çºŒæ€§å’Œæ™‚å€è™•ç†
      - ç¼ºå¤±æ•¸æ“šï¼šåŠ å¯†è²¨å¹£å¸‚å ´çš„ç‰¹æ®Šè™•ç†ç­–ç•¥
      - ç‰ˆæœ¬ç®¡ç†ï¼šraw/processed/features æ•¸æ“šçš„ç‰ˆæœ¬æ§åˆ¶
      
      å¸¸è¦‹å•é¡Œæ¨¡å¼ï¼š
      - API é »ç‡é™åˆ¶ (429 éŒ¯èª¤)
      - æ•¸æ“šæ ¼å¼ä¸ä¸€è‡´ (OHLCV çµæ§‹)
      - æ™‚é–“æˆ³è½‰æ›å•é¡Œ
      - å…§å­˜ä½¿ç”¨å„ªåŒ– (å¤§æ•¸æ“šé›†è™•ç†)
      
    machine_learning: |
      **é‡åŒ–äº¤æ˜“æ©Ÿå™¨å­¸ç¿’æ¨¡å¡Šåˆ†æ**
      
      è«‹ç‰¹åˆ¥æ³¨æ„ä»¥ä¸‹æ©Ÿå™¨å­¸ç¿’ç‰¹é»ï¼š
      - ç‰¹å¾µå·¥ç¨‹ï¼š200+ æŠ€è¡“æŒ‡æ¨™çš„è¨ˆç®—å’Œé¸æ“‡
      - æ¨™ç±¤è¨­è¨ˆï¼šå¤šæ™‚æ¡†é æ¸¬æ¨™ç±¤çš„ç”Ÿæˆ
      - æ•¸æ“šæ´©éœ²ï¼šæ™‚é–“åºåˆ—çš„å‰è¦–åå·®å•é¡Œ
      - æ¨¡å‹è©•ä¼°ï¼šé‡‘èæ™‚é–“åºåˆ—çš„äº¤å‰é©—è­‰ç­–ç•¥
      
      å¸¸è¦‹å•é¡Œæ¨¡å¼ï¼š
      - ç‰¹å¾µç¶­åº¦éé«˜å°è‡´çš„å…§å­˜å•é¡Œ
      - æ¨™ç±¤ä¸å¹³è¡¡å•é¡Œ
      - æ¨¡å‹éæ“¬åˆ (Sharpe æ¯”ç‡è™›é«˜)
      - Optuna å„ªåŒ–æ”¶æ–‚å•é¡Œ
      
    trading_logic: |
      **é‡åŒ–äº¤æ˜“é‚è¼¯æ¨¡å¡Šåˆ†æ**
      
      è«‹ç‰¹åˆ¥æ³¨æ„ä»¥ä¸‹äº¤æ˜“é‚è¼¯ç‰¹é»ï¼š
      - é¢¨éšªæ§åˆ¶ï¼šæ­¢ææ­¢ç›ˆå’Œå€‰ä½ç®¡ç†
      - å¯¦æ™‚åŸ·è¡Œï¼šæ¨¡æ“¬ç›¤å’Œå¯¦ç›¤ç’°å¢ƒåˆ‡æ›
      - ä¿¡è™Ÿç”Ÿæˆï¼šå¤šæ¨¡å‹é›†æˆå’ŒæŠ•ç¥¨æ©Ÿåˆ¶  
      - ç•°æ­¥è™•ç†ï¼šWebSocket æ•¸æ“šæµè™•ç†
      
      å¸¸è¦‹å•é¡Œæ¨¡å¼ï¼š
      - ä¸‹å–®å¤±æ•—å’Œé‡è©¦æ©Ÿåˆ¶
      - å¯¦æ™‚æ•¸æ“šå»¶é²å•é¡Œ
      - é¢¨éšªåƒæ•¸é…ç½®éŒ¯èª¤
      - å›æ¸¬èˆ‡å¯¦ç›¤çµæœå·®ç•°
      
    api_web: |
      **é‡åŒ–äº¤æ˜“ API æ¨¡å¡Šåˆ†æ**
      
      è«‹ç‰¹åˆ¥æ³¨æ„ä»¥ä¸‹ Web API ç‰¹é»ï¼š
      - èªè­‰æˆæ¬Šï¼šJWT å’Œ API key ç®¡ç†
      - å¯¦æ™‚é€šè¨Šï¼šWebSocket å’Œ SSE äº‹ä»¶æµ
      - æ•¸æ“šå®‰å…¨ï¼šäº¤æ˜“ä¿¡è™Ÿå’Œç­–ç•¥ä¿è­·
      - ç›£æ§å‘Šè­¦ï¼šç³»çµ±ç‹€æ…‹å’Œæ€§èƒ½ç›£æ§
      
      å¸¸è¦‹å•é¡Œæ¨¡å¼ï¼š
      - è·¨åŸŸ CORS é…ç½®å•é¡Œ
      - WebSocket é€£æ¥ç©©å®šæ€§
      - å¤§é‡ä½µç™¼è«‹æ±‚è™•ç†
      - æ•æ„Ÿæ•¸æ“šæ´©éœ²é¢¨éšª

# Debug æµç¨‹é…ç½®
debug_workflows:
  quick_scan:
    description: "å¿«é€Ÿç’°å¢ƒå’Œèªæ³•æƒæ"
    steps:
      - "scan_environment"
      - "syntax_check"
      - "import_verification"
    
  deep_analysis:
    description: "æ·±åº¦éŒ¯èª¤åˆ†æ"
    steps:
      - "multi_ai_analysis"
      - "context_gathering"
      - "solution_ranking"
      - "risk_assessment"
    
  batch_repair:
    description: "æ‰¹é‡å•é¡Œä¿®å¾©"
    steps:
      - "issue_prioritization"
      - "auto_fix_attempt"
      - "manual_fix_guidance"
      - "verification"

# éŸ¿æ‡‰æ ¼å¼æ¨¡æ¿
response_templates:
  error_analysis:
    format: |
      ## ğŸ” éŒ¯èª¤åˆ†æçµæœ
      
      **æ ¹æœ¬åŸå› ï¼š** {root_cause}
      
      **ä¿®å¾©æ–¹æ¡ˆï¼š**
      ```python
      {fix_code}
      ```
      
      **é¢¨éšªè©•ä¼°ï¼š** {risk_assessment}
      
      **æ¸¬è©¦å»ºè­°ï¼š** {test_suggestions}
      
      **AI å…±è­˜åº¦ï¼š** {consensus_confidence:.1%}
      
  batch_scan:
    format: |
      ## ğŸ“Š ä»£ç¢¼æƒæå ±å‘Š
      
      **æƒæç¯„åœï¼š** {scan_paths}
      **ç¸½å•é¡Œæ•¸ï¼š** {total_issues}
      
      **å•é¡Œåˆ†ä½ˆï¼š**
      {issues_breakdown}
      
      **å„ªå…ˆä¿®å¾©æ¸…å–®ï¼š**
      {priority_fixes}

# æ€§èƒ½é…ç½®
performance:
  max_concurrent_requests: 3
  request_timeout: 30
  retry_attempts: 2
  cache_responses: true
  cache_duration: 300  # 5 åˆ†é˜

# æ—¥èªŒé…ç½®
logging:
  level: "INFO"
  format: "[{time}] {level} | {ai_backend} | {message}"
  file: "mcp_debug.log"
  max_size: "10MB"
  backup_count: 5
