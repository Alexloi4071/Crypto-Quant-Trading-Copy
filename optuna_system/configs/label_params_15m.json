{
  "timeframe": "15m",
  "best_params": {
    "lag": 7,
    "threshold_method": "quantile",
    "lookback_window": 512,
    "buy_quantile": 0.7607492840448721,
    "sell_quantile": 0.277911998682499,
    "profit_threshold": 0.014299830189127257,
    "loss_threshold": -0.028068591097900428,
    "vol_multiplier": 1.4840513984585064,
    "vol_window": 33,
    "profit_multiplier": 2.8654513933922003,
    "stop_multiplier": 0.8670789681690186,
    "max_holding": 18,
    "atr_period": 15,
    "min_samples": 1010,
    "balance_weight": 0.6941092347878598,
    "stability_weight": 0.41533504133122406,
    "fixed_lookback": 1820,
    "min_threshold_gap": 0.006021083418021752,
    "max_noise_ratio": 0.2989897655219604,
    "target_hold_ratio": 0.48626664906268413,
    "distribution_penalty": 1.0855349298358583,
    "target_distribution": [
      0.25,
      0.5,
      0.25
    ],
    "distribution_tolerance": 0.07040983721418953,
    "rebalance_method": "threshold_shift",
    "transaction_cost_bps": 14.896378073088446,
    "sharpe_weight": 0.364774605394101,
    "win_weight": 0.2618275277916648,
    "trade_weight": 0.2877842964580975,
    "label_weight": 0.16832576007221783,
    "target_trades_per_day": 3.3798163039068627,
    "n_trials": 150
  },
  "best_score": 1.034003153196409,
  "n_trials": 150,
  "final_quality": {
    "balance_score": 0.99826476284897,
    "stability_score": 0.7286900605933775,
    "f1_score": 0.9824466308856055,
    "precision_macro": 1.0,
    "recall_macro": 0.9654988727919565,
    "distribution": [
      0.2758758454060327,
      0.48561263994977505,
      0.23851151464419226
    ],
    "total_samples": 105127
  },
  "meta_vol": 0.010367718346314022,
  "optimization_history": [
    {
      "trial": 0,
      "score": -999.0
    },
    {
      "trial": 1,
      "score": 0.8513302366439666
    },
    {
      "trial": 2,
      "score": 0.4502524119547997
    },
    {
      "trial": 3,
      "score": 0.9426768490524161
    },
    {
      "trial": 4,
      "score": 0.9226576484152402
    },
    {
      "trial": 5,
      "score": -999.0
    },
    {
      "trial": 6,
      "score": -999.0
    },
    {
      "trial": 7,
      "score": 0.48270320441771003
    },
    {
      "trial": 8,
      "score": -999.0
    },
    {
      "trial": 9,
      "score": 0.8237005113415306
    },
    {
      "trial": 10,
      "score": 0.9540333273740342
    },
    {
      "trial": 11,
      "score": 0.9522946287084362
    },
    {
      "trial": 12,
      "score": 0.9565423941546232
    },
    {
      "trial": 13,
      "score": 0.9665700164965875
    },
    {
      "trial": 14,
      "score": 0.9789388595316386
    },
    {
      "trial": 15,
      "score": 0.9812713376229429
    },
    {
      "trial": 16,
      "score": 1.0021955213036229
    },
    {
      "trial": 17,
      "score": 1.0019132887039672
    },
    {
      "trial": 18,
      "score": 0.9957603928274504
    },
    {
      "trial": 19,
      "score": 0.9950288108055823
    },
    {
      "trial": 20,
      "score": 0.920357722088603
    },
    {
      "trial": 21,
      "score": 0.9872800591617329
    },
    {
      "trial": 22,
      "score": 1.0034459120651866
    },
    {
      "trial": 23,
      "score": 0.9194024480637703
    },
    {
      "trial": 24,
      "score": 0.8898821555512867
    },
    {
      "trial": 25,
      "score": 0.9179353808111459
    },
    {
      "trial": 26,
      "score": 0.9944094276074107
    },
    {
      "trial": 27,
      "score": 1.0232191786803022
    },
    {
      "trial": 28,
      "score": 1.0209396169808092
    },
    {
      "trial": 29,
      "score": -999.0
    },
    {
      "trial": 30,
      "score": -999.0
    },
    {
      "trial": 31,
      "score": 1.0011716988742372
    },
    {
      "trial": 32,
      "score": 1.0232108765215426
    },
    {
      "trial": 33,
      "score": 0.8314762219299361
    },
    {
      "trial": 34,
      "score": 1.009219064173634
    },
    {
      "trial": 35,
      "score": 0.9899663658842369
    },
    {
      "trial": 36,
      "score": 1.0155175492188484
    },
    {
      "trial": 37,
      "score": -999.0
    },
    {
      "trial": 38,
      "score": 0.992451755853233
    },
    {
      "trial": 39,
      "score": 0.9988414244101673
    },
    {
      "trial": 40,
      "score": -999.0
    },
    {
      "trial": 41,
      "score": 1.025952126785657
    },
    {
      "trial": 42,
      "score": 1.021192076373055
    },
    {
      "trial": 43,
      "score": 1.0142388601130081
    },
    {
      "trial": 44,
      "score": 0.822901047451506
    },
    {
      "trial": 45,
      "score": 1.0152433137562937
    },
    {
      "trial": 46,
      "score": -999.0
    },
    {
      "trial": 47,
      "score": 1.003034028124042
    },
    {
      "trial": 48,
      "score": 1.0012092340065883
    },
    {
      "trial": 49,
      "score": 0.9662601275079246
    },
    {
      "trial": 50,
      "score": 0.9760143968373967
    },
    {
      "trial": 51,
      "score": 1.0119279979582712
    },
    {
      "trial": 52,
      "score": 0.9891782590703577
    },
    {
      "trial": 53,
      "score": 1.0238138269777697
    },
    {
      "trial": 54,
      "score": 1.0226927577150793
    },
    {
      "trial": 55,
      "score": 1.0196365669010323
    },
    {
      "trial": 56,
      "score": 1.0073408737072818
    },
    {
      "trial": 57,
      "score": 0.8743830880651774
    },
    {
      "trial": 58,
      "score": 0.9896127126153073
    },
    {
      "trial": 59,
      "score": 0.9949391043729897
    },
    {
      "trial": 60,
      "score": 0.9913352061952693
    },
    {
      "trial": 61,
      "score": 1.006193948521116
    },
    {
      "trial": 62,
      "score": 1.0202735654993735
    },
    {
      "trial": 63,
      "score": 0.9654523395615092
    },
    {
      "trial": 64,
      "score": 1.021940260648596
    },
    {
      "trial": 65,
      "score": 1.0149044960514786
    },
    {
      "trial": 66,
      "score": -999.0
    },
    {
      "trial": 67,
      "score": 1.0264267255254438
    },
    {
      "trial": 68,
      "score": 0.9026206931433768
    },
    {
      "trial": 69,
      "score": -999.0
    },
    {
      "trial": 70,
      "score": 0.9988997014888699
    },
    {
      "trial": 71,
      "score": 1.0228379950460469
    },
    {
      "trial": 72,
      "score": 1.0223308535637605
    },
    {
      "trial": 73,
      "score": 1.0153757789690427
    },
    {
      "trial": 74,
      "score": 0.9549773822847318
    },
    {
      "trial": 75,
      "score": 1.028234928300305
    },
    {
      "trial": 76,
      "score": 1.0140288387120147
    },
    {
      "trial": 77,
      "score": 0.9940414820381334
    },
    {
      "trial": 78,
      "score": 0.6135416592110474
    },
    {
      "trial": 79,
      "score": 1.0209668751085264
    },
    {
      "trial": 80,
      "score": 1.0140389518346513
    },
    {
      "trial": 81,
      "score": 1.0144938714864813
    },
    {
      "trial": 82,
      "score": 1.0229479010504334
    },
    {
      "trial": 83,
      "score": 1.028411313275388
    },
    {
      "trial": 84,
      "score": 1.0195868232259857
    },
    {
      "trial": 85,
      "score": -999.0
    },
    {
      "trial": 86,
      "score": 1.0167086540522012
    },
    {
      "trial": 87,
      "score": 1.0086225508740523
    },
    {
      "trial": 88,
      "score": 1.0157279779398058
    },
    {
      "trial": 89,
      "score": 0.9940539479388588
    },
    {
      "trial": 90,
      "score": 0.9910039195196392
    },
    {
      "trial": 91,
      "score": 0.9954327726834097
    },
    {
      "trial": 92,
      "score": 0.989672439120461
    },
    {
      "trial": 93,
      "score": 1.0152613207253234
    },
    {
      "trial": 94,
      "score": 0.9877402580456296
    },
    {
      "trial": 95,
      "score": 1.0143907448773155
    },
    {
      "trial": 96,
      "score": 1.0280243148291803
    },
    {
      "trial": 97,
      "score": 0.9904012450694603
    },
    {
      "trial": 98,
      "score": 0.7338047464879931
    },
    {
      "trial": 99,
      "score": 1.0094672731662129
    },
    {
      "trial": 100,
      "score": 0.993787241451878
    },
    {
      "trial": 101,
      "score": 0.9951063208455906
    },
    {
      "trial": 102,
      "score": 0.9083532797513775
    },
    {
      "trial": 103,
      "score": 1.016393681611801
    },
    {
      "trial": 104,
      "score": 1.0217989312279958
    },
    {
      "trial": 105,
      "score": 1.005173413939254
    },
    {
      "trial": 106,
      "score": 1.008162219868606
    },
    {
      "trial": 107,
      "score": -999.0
    },
    {
      "trial": 108,
      "score": 0.9698653239837862
    },
    {
      "trial": 109,
      "score": 0.9918712857849306
    },
    {
      "trial": 110,
      "score": 0.9952501361839708
    },
    {
      "trial": 111,
      "score": 1.02295154254149
    },
    {
      "trial": 112,
      "score": 1.0081448173397043
    },
    {
      "trial": 113,
      "score": 1.0123050985501787
    },
    {
      "trial": 114,
      "score": 1.0163676202825993
    },
    {
      "trial": 115,
      "score": 1.0228520496936337
    },
    {
      "trial": 116,
      "score": 1.0103493705775584
    },
    {
      "trial": 117,
      "score": 1.02343318620615
    },
    {
      "trial": 118,
      "score": 0.9242376553843608
    },
    {
      "trial": 119,
      "score": 1.0100739418066194
    },
    {
      "trial": 120,
      "score": 0.9925671930351091
    },
    {
      "trial": 121,
      "score": 1.0247853630316492
    },
    {
      "trial": 122,
      "score": 1.0154746031854651
    },
    {
      "trial": 123,
      "score": 1.0134436921724896
    },
    {
      "trial": 124,
      "score": 0.9991225510639273
    },
    {
      "trial": 125,
      "score": 1.0217562899807933
    },
    {
      "trial": 126,
      "score": 1.0152800024638098
    },
    {
      "trial": 127,
      "score": 0.8530245884689351
    },
    {
      "trial": 128,
      "score": 1.0175215781398823
    },
    {
      "trial": 129,
      "score": 1.02743386053224
    },
    {
      "trial": 130,
      "score": -999.0
    },
    {
      "trial": 131,
      "score": 1.0260450103570868
    },
    {
      "trial": 132,
      "score": 1.0310675453948304
    },
    {
      "trial": 133,
      "score": 1.0250452362126874
    },
    {
      "trial": 134,
      "score": 1.0192194832284511
    },
    {
      "trial": 135,
      "score": 1.0170321964831477
    },
    {
      "trial": 136,
      "score": 1.011820353644291
    },
    {
      "trial": 137,
      "score": 1.022566901062473
    },
    {
      "trial": 138,
      "score": 1.008862569112025
    },
    {
      "trial": 139,
      "score": 0.9884955368602907
    },
    {
      "trial": 140,
      "score": 1.0078263188972105
    },
    {
      "trial": 141,
      "score": 1.027673962184509
    },
    {
      "trial": 142,
      "score": 1.0326596450334455
    },
    {
      "trial": 143,
      "score": 1.013613272097848
    },
    {
      "trial": 144,
      "score": 1.034003153196409
    },
    {
      "trial": 145,
      "score": 1.018193463384849
    },
    {
      "trial": 146,
      "score": 1.031823617655033
    },
    {
      "trial": 147,
      "score": 1.0251841330853726
    },
    {
      "trial": 148,
      "score": 1.0249291221307133
    },
    {
      "trial": 149,
      "score": 1.0305372806787954
    }
  ],
  "materialized_path": "D:\\crypto-quant-trading-copy\\crypto-quant-trading-copy\\crypto-quant-trading-copy\\data\\processed\\labels\\BTCUSDT_15m\\v27\\labels_BTCUSDT_15m_eda5e43eb1c1ee509d248239d40858dc.parquet",
  "metadata": {
    "created_at": "2025-10-10T06:32:27.338467+00:00",
    "params_hash": "eda5e43eb1c1ee509d248239d40858dc",
    "data_shape": [
      105127,
      6
    ],
    "data_columns": [
      "open",
      "high",
      "low",
      "close",
      "volume",
      "label"
    ],
    "cached": false,
    "storage_format": "parquet",
    "json_path": "d:\\crypto-quant-trading-copy\\crypto-quant-trading-copy\\crypto-quant-trading-copy\\optuna_system\\configs\\label_params_15m.json",
    "best_params": {
      "lag": 7,
      "threshold_method": "quantile",
      "lookback_window": 512,
      "buy_quantile": 0.7607492840448721,
      "sell_quantile": 0.277911998682499,
      "profit_threshold": 0.014299830189127257,
      "loss_threshold": -0.028068591097900428,
      "vol_multiplier": 1.4840513984585064,
      "vol_window": 33,
      "profit_multiplier": 2.8654513933922003,
      "stop_multiplier": 0.8670789681690186,
      "max_holding": 18,
      "atr_period": 15,
      "min_samples": 1010,
      "balance_weight": 0.6941092347878598,
      "stability_weight": 0.41533504133122406,
      "fixed_lookback": 1820,
      "min_threshold_gap": 0.006021083418021752,
      "max_noise_ratio": 0.2989897655219604,
      "target_hold_ratio": 0.48626664906268413,
      "distribution_penalty": 1.0855349298358583,
      "target_distribution": [
        0.25,
        0.5,
        0.25
      ],
      "distribution_tolerance": 0.07040983721418953,
      "rebalance_method": "threshold_shift",
      "transaction_cost_bps": 14.896378073088446,
      "sharpe_weight": 0.364774605394101,
      "win_weight": 0.2618275277916648,
      "trade_weight": 0.2877842964580975,
      "label_weight": 0.16832576007221783,
      "target_trades_per_day": 3.3798163039068627,
      "n_trials": 150
    },
    "file_path": "D:\\crypto-quant-trading-copy\\crypto-quant-trading-copy\\crypto-quant-trading-copy\\data\\processed\\labels\\BTCUSDT_15m\\v27\\labels_BTCUSDT_15m_eda5e43eb1c1ee509d248239d40858dc.parquet",
    "file_md5": "2e3deaf395a2e3bcf2fdd6ce0eebf7ef",
    "best_score": 1.034003153196409,
    "n_trials": 150
  },
  "data_version": "layer1_labels_eda5e43eb1_105127x6_20251010143227"
}